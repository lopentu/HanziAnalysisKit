<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>hgct &mdash; HanziAnalysisKit  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=bfab0ba5" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="lexicoR" href="lexicoR.html" />
    <link rel="prev" title="HanziAnalysisKit" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            HanziAnalysisKit
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">hgct</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick Start</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-the-corpus">Building the Corpus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#directory-structure">Directory Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#demonstration">Demonstration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#corpus-reading-and-concordancer-initialization">Corpus Reading and Concordancer Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#utility-function-for-cql-search">Utility Function for CQL Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="#search-by-characters">Search by Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#search-by-character-components">Search by Character Components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#kangxi-radical">Kangxi Radical</a></li>
<li class="toctree-l4"><a class="reference internal" href="#idc">IDC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#radical-semantic-type">Radical Semantic Type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#search-by-phonetic-properties">Search by Phonetic Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mandarin">Mandarin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#middle-chinese">Middle Chinese</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-analysis-tools">Setting Up Analysis Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frequency-distribution-analysis">Frequency Distribution Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#character">Character</a></li>
<li class="toctree-l4"><a class="reference internal" href="#characters-with-a-given-radical">Characters with a given radical</a></li>
<li class="toctree-l4"><a class="reference internal" href="#characters-with-a-given-idc-component">Characters with a given IDC component</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dispersion-analysis">Dispersion Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ngram-and-collocation-analysis">Ngram and Collocation Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lexicoR.html">lexicoR</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HanziAnalysisKit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">hgct</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tools/hgct.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hgct">
<h1>hgct<a class="headerlink" href="#hgct" title="Link to this heading"></a></h1>
<p>This page showcases the <a class="reference external" href="https://yongfu.name/hgct/index.html">HGCT (Hanzi Glyph Corpus Toolkit)</a>, a tool designed for advanced analysis and querying of Chinese text data, demonstrated through a textbook-derived corpus.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>To starting using HGCT, clone the repository and install the required dependencies.</p>
<ul>
<li><p>Python Version</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Python<span class="w"> </span>&gt;<span class="o">=</span><span class="w"> </span><span class="m">3</span>.0,<span class="w"> </span>&lt;<span class="w"> </span><span class="m">3</span>.11
</pre></div>
</div>
</li>
<li><p>Clone Repository</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:lopentu/HanziAnalysisKit.git
</pre></div>
</div>
</li>
<li><p>Install Requirement</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>HanziAnalysisKit<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
</li>
</ul>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading"></a></h2>
<section id="building-the-corpus">
<h3>Building the Corpus<a class="headerlink" href="#building-the-corpus" title="Link to this heading"></a></h3>
<p>To prepare your data for use with the HGCT tool, build your corpus from the provided textbook data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">textbook</span> <span class="kn">import</span> <span class="n">build_corpus</span>

<span class="c1"># Specify your CSV data file and desired output folder</span>
<span class="n">csv_file</span> <span class="o">=</span> <span class="s1">&#39;./data/教科書課文.csv&#39;</span>
<span class="n">folder</span> <span class="o">=</span> <span class="s2">&quot;textbook_corpus&quot;</span>

<span class="c1"># Build the corpus</span>
<span class="n">build_corpus</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span>
</pre></div>
</div>
<p>This will create a <cite>textbook_corpus</cite> folder in your project directory, containing the processed data ready for analysis with HGCT.</p>
</section>
<section id="directory-structure">
<h3>Directory Structure<a class="headerlink" href="#directory-structure" title="Link to this heading"></a></h3>
<p>After building the corpus, your project directory will be organized as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="p">|</span>---<span class="w"> </span>data/
<span class="p">|</span><span class="w">    </span><span class="p">|</span>---<span class="w"> </span>教科書課文.csv
<span class="p">|</span>---<span class="w"> </span>textbook/
<span class="p">|</span>---<span class="w"> </span>textbook_corpus/<span class="w"> </span><span class="c1"># Newly generated</span>
<span class="p">|</span>---<span class="w"> </span>...
</pre></div>
</div>
</section>
</section>
<section id="demonstration">
<h2>Demonstration<a class="headerlink" href="#demonstration" title="Link to this heading"></a></h2>
<p>This section provides comprehensive examples demonstrating the capabilities of HGCT for analyzing Chinese text data. Each example includes a brief description and the expected output.</p>
<section id="corpus-reading-and-concordancer-initialization">
<h3>Corpus Reading and Concordancer Initialization<a class="headerlink" href="#corpus-reading-and-concordancer-initialization" title="Link to this heading"></a></h3>
<p>Load your corpus and set up the Concordancer for text analysis:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hgct</span> <span class="kn">import</span> <span class="n">PlainTextReader</span><span class="p">,</span> <span class="n">Concordancer</span>

<span class="c1"># Load the corpus into PlainTextReader</span>
<span class="n">corpus</span> <span class="o">=</span> <span class="n">PlainTextReader</span><span class="p">(</span><span class="n">dir_path</span><span class="o">=</span><span class="s2">&quot;textbook_corpus/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">corpus</span>

<span class="c1"># Initialize the Concordancer with the loaded corpus</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Concordancer</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="utility-function-for-cql-search">
<h3>Utility Function for CQL Search<a class="headerlink" href="#utility-function-for-cql-search" title="Link to this heading"></a></h3>
<p>Create a function to facilitate Corpus Query Language (CQL) searches and display results:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_first_n</span><span class="p">(</span><span class="n">cql</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">cql_search</span><span class="p">(</span><span class="n">cql</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="n">right</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span> <span class="k">break</span>
        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
</section>
<section id="search-by-characters">
<h3>Search by Characters<a class="headerlink" href="#search-by-characters" title="Link to this heading"></a></h3>
<p>Perform searches based on character-specific criteria.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cql</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">[char=&quot;窗&quot;] [char=&quot;[一-窗]&quot;]</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">get_first_n</span><span class="p">(</span><span class="n">cql</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">results</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[
    &lt;Concord 門、客廳和{窗戶}旁貼上年畫&gt;,
    &lt;Concord 水匠來，把{窗子}用甎頭堵上&gt;,
    &lt;Concord 子，就指著{窗子}說：「這兩&gt;,
    &lt;Concord 大門上、紙{窗旁}，幾乎都貼&gt;,
    &lt;Concord 要把這兩個{窗子}堵起來。」&gt;,
]
</pre></div>
</div>
</div>
<p>To examine detailed information about a specific match, retrieve the <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute from a Concordance object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_1</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">result_1</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="s1">&#39;門、客廳和&#39;</span><span class="p">,</span>
    <span class="s1">&#39;keyword&#39;</span><span class="p">:</span> <span class="s1">&#39;窗戶&#39;</span><span class="p">,</span>
    <span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="s1">&#39;旁貼上年畫&#39;</span><span class="p">,</span>
    <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span>
    <span class="s1">&#39;meta&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;4S/90-1-有趣的年畫.txt&#39;</span><span class="p">,</span>
        <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;教科書課文 - 4下&#39;</span><span class="p">,</span>
            <span class="s1">&#39;ord&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;90&#39;</span><span class="p">,</span> <span class="s1">&#39;88&#39;</span><span class="p">,</span> <span class="s1">&#39;69&#39;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;lesson&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;有趣的年畫&#39;</span><span class="p">,</span>
            <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;90&#39;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s1">&#39;captureGroups&#39;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="search-by-character-components">
<h3>Search by Character Components<a class="headerlink" href="#search-by-character-components" title="Link to this heading"></a></h3>
<p>Explore additional character searches using Kangxi radicals and Ideographic Description Characters (IDCs).</p>
<section id="kangxi-radical">
<h4>Kangxi Radical<a class="headerlink" href="#kangxi-radical" title="Link to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cql</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">[radical=&quot;穴&quot;]</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">get_first_n</span><span class="p">(</span><span class="n">cql</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[
    &lt;Concord 更飛進了太{空}。萊特兄弟&gt;,
    &lt;Concord 以後，一有{空}，我就要哥&gt;,
    &lt;Concord 高的掛在天{空}。好多人看&gt;,
    &lt;Concord 笑語，聞著{空}氣中淡淡的&gt;,
    &lt;Concord 箭手，不論{空}中的飛雁，&gt;,
]
</pre></div>
</div>
</div>
</section>
<section id="idc">
<h4>IDC<a class="headerlink" href="#idc" title="Link to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cql</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">[compo=&quot;木&quot; &amp; idc=&quot;horz2&quot;] # &#39;horz2&#39; represents &#39;⿰&#39;</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">get_first_n</span><span class="p">(</span><span class="n">cql</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[
    &lt;Concord 舞動，這個{栩}栩如生的掌&gt;,
    &lt;Concord 動，這個栩{栩}如生的掌中&gt;,
    &lt;Concord 城河上的小{橋}，穿過古老&gt;,
    &lt;Concord 巒溪的長虹{橋}附近，兩岸&gt;,
    &lt;Concord 來到人間的{橋}梁。小弟弟&gt;,
]
</pre></div>
</div>
</div>
</section>
<section id="radical-semantic-type">
<h4>Radical Semantic Type<a class="headerlink" href="#radical-semantic-type" title="Link to this heading"></a></h4>
<p>One can also search by the semantic type of Kangxi radicals based on Ma’s (2016) classification.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cql</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">[semtag=&quot;植物&quot;] [semtag=&quot;植物&quot;]</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="n">get_first_n</span><span class="p">(</span><span class="n">cql</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[
    &lt;Concord 握細緻的小{楷筆},一筆一畫&gt;,
    &lt;Concord 年的歷史，{梁柱}雕刻很細緻&gt;,
    &lt;Concord 在二十世紀{萌芽}的新科技，&gt;,
    &lt;Concord 印象深刻。{花蓮}秀姑巒溪的&gt;,
    &lt;Concord 遠到宜蘭、{花蓮}，深入原住&gt;,
]
</pre></div>
</div>
</div>
</section>
</section>
<section id="search-by-phonetic-properties">
<h3>Search by Phonetic Properties<a class="headerlink" href="#search-by-phonetic-properties" title="Link to this heading"></a></h3>
<p>Explore phonetic aspects of the text by utilizing specific phonetic attributes available in the corpus.</p>
<section id="mandarin">
<h4>Mandarin<a class="headerlink" href="#mandarin" title="Link to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cql</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">[phon=&quot;ㄨㄥ&quot; &amp; tone=&quot;1&quot; &amp; sys=&quot;moe&quot;]</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="n">get_first_n</span><span class="p">(</span><span class="n">cql</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[
    &lt;Concord 前有一個富{翁}，很迷信。&gt;,
    &lt;Concord 起來。」富{翁}聽了，就叫&gt;,
    &lt;Concord 。他就對富{翁}說：「這棵&gt;,
    &lt;Concord 棵樹。」富{翁}聽了，覺得&gt;,
    &lt;Concord 有一天，富{翁}的朋友來，&gt;,
]
</pre></div>
</div>
</div>
</section>
<section id="middle-chinese">
<h4>Middle Chinese<a class="headerlink" href="#middle-chinese" title="Link to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cql</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">[韻母=&quot;東&quot; &amp; 聲調=&quot;平&quot; &amp; sys=&quot;廣韻&quot;]</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="n">get_first_n</span><span class="p">(</span><span class="n">cql</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[
    &lt;Concord 我要學給有{蟲}的樹治病，&gt;,
    &lt;Concord ，只剩竹節{蟲}與枯葉蝶，&gt;,
    &lt;Concord 驚嘆。竹節{蟲}與枯葉蝶就&gt;,
    &lt;Concord 眼前，竹節{蟲}和竹子的細&gt;,
    &lt;Concord 比賽，竹節{蟲}與枯葉蝶勝&gt;,
]
</pre></div>
</div>
</div>
</section>
</section>
<section id="setting-up-analysis-tools">
<h3>Setting Up Analysis Tools<a class="headerlink" href="#setting-up-analysis-tools" title="Link to this heading"></a></h3>
<p>Initialize the necessary tools for component analysis, concordance searches, and dispersion analysis. This setup enables detailed linguistic exploration within the <code class="docutils literal notranslate"><span class="pre">textbook_corpus</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hgct</span> <span class="kn">import</span> <span class="n">CompoAnalysis</span><span class="p">,</span> <span class="n">PlainTextReader</span><span class="p">,</span> <span class="n">Concordancer</span><span class="p">,</span> <span class="n">Dispersion</span>

<span class="n">CA</span> <span class="o">=</span> <span class="n">CompoAnalysis</span><span class="p">(</span><span class="n">PlainTextReader</span><span class="p">(</span><span class="s2">&quot;textbook_corpus/&quot;</span><span class="p">,</span> <span class="n">auto_load</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="n">CC</span> <span class="o">=</span> <span class="n">Concordancer</span><span class="p">(</span><span class="n">PlainTextReader</span><span class="p">(</span><span class="s2">&quot;textbook_corpus/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">corpus</span><span class="p">)</span>
<span class="n">DP</span> <span class="o">=</span> <span class="n">Dispersion</span><span class="p">(</span><span class="n">PlainTextReader</span><span class="p">(</span><span class="s2">&quot;textbook_corpus/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">corpus</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="frequency-distribution-analysis">
<h3>Frequency Distribution Analysis<a class="headerlink" href="#frequency-distribution-analysis" title="Link to this heading"></a></h3>
<section id="character">
<h4>Character<a class="headerlink" href="#character" title="Link to this heading"></a></h4>
<p>Retrieve the most common characters from a 5th grade fall textbook. The <code class="docutils literal notranslate"><span class="pre">tp</span></code> parameter specifies the type; here it is set to “chr” for characters.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CA</span><span class="o">.</span><span class="n">freq_distr</span><span class="p">(</span><span class="n">tp</span><span class="o">=</span><span class="s2">&quot;chr&quot;</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;的&#39;</span><span class="p">,</span> <span class="mi">108</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;，&#39;</span><span class="p">,</span> <span class="mi">104</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;。&#39;</span><span class="p">,</span> <span class="mi">68</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;了&#39;</span><span class="p">,</span> <span class="mi">47</span><span class="p">)]</span>
</pre></div>
</div>
</section>
<section id="characters-with-a-given-radical">
<h4>Characters with a given radical<a class="headerlink" href="#characters-with-a-given-radical" title="Link to this heading"></a></h4>
<p>Calculate the frequency of characters containing the radical “水” across the same textbook.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CA</span><span class="o">.</span><span class="n">freq_distr</span><span class="p">(</span><span class="n">tp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">radical</span><span class="o">=</span><span class="s2">&quot;水&quot;</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;洲&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;海&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;沒&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;湖&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">)]</span>
</pre></div>
</div>
</section>
<section id="characters-with-a-given-idc-component">
<h4>Characters with a given IDC component<a class="headerlink" href="#characters-with-a-given-idc-component" title="Link to this heading"></a></h4>
<p>Analyze the frequency of characters containing the IDC component “土” with a vertical arrangement in the same textbook.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CA</span><span class="o">.</span><span class="n">freq_distr</span><span class="p">(</span><span class="n">tp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compo</span><span class="o">=</span><span class="s2">&quot;土&quot;</span><span class="p">,</span> <span class="n">idc</span><span class="o">=</span><span class="s2">&quot;vert2&quot;</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;王&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
     <span class="s1">&#39;去&#39;</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
     <span class="s1">&#39;走&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
     <span class="s1">&#39;堅&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
     <span class="s1">&#39;幸&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
     <span class="s1">&#39;墓&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
     <span class="s1">&#39;至&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
     <span class="s1">&#39;壁&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
     <span class="s1">&#39;堂&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
     <span class="s1">&#39;主&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
     <span class="s1">&#39;基&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
     <span class="s1">&#39;赤&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
     <span class="s1">&#39;堡&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</pre></div>
</div>
</section>
</section>
<section id="dispersion-analysis">
<h3>Dispersion Analysis<a class="headerlink" href="#dispersion-analysis" title="Link to this heading"></a></h3>
<p>Analyze how uniformly certain characters are spread throughout the corpus to understand their usage patterns. In this example, we look at the dispersion of ‘的’ (a function word) and ‘花’ (a content word).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df_disp</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;的花&#39;</span><span class="p">:</span>
    <span class="n">stats</span><span class="p">,</span> <span class="n">raw</span> <span class="o">=</span> <span class="n">DP</span><span class="o">.</span><span class="n">char_dispersion</span><span class="p">(</span>
        <span class="n">char</span><span class="o">=</span><span class="n">ch</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">return_raw</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;char&#39;</span><span class="p">:</span> <span class="n">ch</span><span class="p">,</span>
        <span class="s1">&#39;Range(%)&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;Range&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">raw</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">]),</span>  <span class="c1"># Normalize range as a percentage of total segments</span>
        <span class="o">**</span><span class="n">stats</span>  <span class="c1"># Include all other stats</span>
    <span class="p">}</span>
    <span class="n">df_disp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

<span class="n">df_disp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df_disp</span><span class="p">)</span>
<span class="n">df_disp</span>
</pre></div>
</div>
<p>This prints:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Char</p></th>
<th class="head"><p>Range(%)</p></th>
<th class="head"><p>Range</p></th>
<th class="head"><p>DP</p></th>
<th class="head"><p>DPnorm</p></th>
<th class="head"><p>KLdivergence</p></th>
<th class="head"><p>JuillandD</p></th>
<th class="head"><p>RosengrenS</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>的</p></td>
<td><p>100.00</p></td>
<td><p>9</p></td>
<td><p>0.179573</p></td>
<td><p>0.187460</p></td>
<td><p>0.126840</p></td>
<td><p>0.840689</p></td>
<td><p>0.955655</p></td>
</tr>
<tr class="row-odd"><td><p>花</p></td>
<td><p>33.33</p></td>
<td><p>3</p></td>
<td><p>0.686952</p></td>
<td><p>0.717124</p></td>
<td><p>1.899763</p></td>
<td><p>0.384915</p></td>
<td><p>0.290457</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ngram-and-collocation-analysis">
<h3>Ngram and Collocation Analysis<a class="headerlink" href="#ngram-and-collocation-analysis" title="Link to this heading"></a></h3>
<p>Analyze bigrams and their associations using various statistical measures to better understand the common pairings and their strengths in a 5th grade fall textbook corpus.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Frequency distribution of 2-gram ngrams</span>
<span class="n">CC</span><span class="o">.</span><span class="n">freq_distr_ngrams</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;他們&#39;</span><span class="p">,</span> <span class="mi">26</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;母親&#39;</span><span class="p">,</span> <span class="mi">26</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;我們&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;一個&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">)]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Bigram associations sorted by G-squared statistic</span>
<span class="n">bi_asso</span> <span class="o">=</span> <span class="n">CC</span><span class="o">.</span><span class="n">bigram_associations</span><span class="p">(</span><span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sort_by</span><span class="o">=</span><span class="s2">&quot;Gsq&quot;</span><span class="p">)</span>
<span class="n">bi_asso</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>This prints:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
 <span class="s1">&#39;母親&#39;</span><span class="p">,</span>
 <span class="p">{</span>
    <span class="s1">&#39;MI&#39;</span><span class="p">:</span> <span class="mf">8.254205080149351</span><span class="p">,</span>
    <span class="s1">&#39;Xsq&#39;</span><span class="p">:</span> <span class="mf">7934.8041752841245</span><span class="p">,</span>
    <span class="s1">&#39;Gsq&#39;</span><span class="p">:</span> <span class="mf">329.2349988448261</span><span class="p">,</span>
    <span class="s1">&#39;Dice&#39;</span><span class="p">:</span> <span class="mf">0.9285714285714286</span><span class="p">,</span>
    <span class="s1">&#39;DeltaP21&#39;</span><span class="p">:</span> <span class="mf">0.9626357378320729</span><span class="p">,</span>
    <span class="s1">&#39;DeltaP12&#39;</span><span class="p">:</span> <span class="mf">0.8964426252943788</span><span class="p">,</span>
    <span class="s1">&#39;FisherExact&#39;</span><span class="p">:</span> <span class="mf">3.6528671910409246e-72</span><span class="p">,</span>
    <span class="s1">&#39;RawCount&#39;</span><span class="p">:</span> <span class="mi">26</span>
 <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([{</span><span class="s1">&#39;bigram&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">**</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bi_asso</span><span class="p">][:</span><span class="mi">5</span><span class="p">])</span>
<span class="n">d</span>
</pre></div>
</div>
<p>This prints:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>bigram</p></th>
<th class="head"><p>MI</p></th>
<th class="head"><p>Xsq</p></th>
<th class="head"><p>Gsq</p></th>
<th class="head"><p>Dice</p></th>
<th class="head"><p>DeltaP21</p></th>
<th class="head"><p>DeltaP12</p></th>
<th class="head"><p>FisherExact</p></th>
<th class="head"><p>RawCount</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>母親</p></td>
<td><p>8.254205</p></td>
<td><p>7934.8042</p></td>
<td><p>329.2350</p></td>
<td><p>0.928571</p></td>
<td><p>0.962636</p></td>
<td><p>0.896443</p></td>
<td><p>3.652867e-72</p></td>
<td><p>26</p></td>
</tr>
<tr class="row-odd"><td><p>時候</p></td>
<td><p>7.674781</p></td>
<td><p>3871.3328</p></td>
<td><p>211.5859</p></td>
<td><p>0.593750</p></td>
<td><p>0.422222</p></td>
<td><p>0.997167</p></td>
<td><p>1.488648e-46</p></td>
<td><p>19</p></td>
</tr>
<tr class="row-even"><td><p>企鵝</p></td>
<td><p>9.466194</p></td>
<td><p>9195.0000</p></td>
<td><p>196.5797</p></td>
<td><p>1.000000</p></td>
<td><p>1.000000</p></td>
<td><p>1.000000</p></td>
<td><p>1.869793e-42</p></td>
<td><p>13</p></td>
</tr>
<tr class="row-odd"><td><p>南極</p></td>
<td><p>8.435315</p></td>
<td><p>5531.9219</p></td>
<td><p>195.0192</p></td>
<td><p>0.761905</p></td>
<td><p>0.940196</p></td>
<td><p>0.639891</p></td>
<td><p>2.816916e-43</p></td>
<td><p>16</p></td>
</tr>
<tr class="row-even"><td><p>小昌</p></td>
<td><p>7.235897</p></td>
<td><p>2700.5653</p></td>
<td><p>186.4523</p></td>
<td><p>0.455696</p></td>
<td><p>0.295082</p></td>
<td><p>0.995314</p></td>
<td><p>3.869527e-41</p></td>
<td><p>18</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="HanziAnalysisKit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="lexicoR.html" class="btn btn-neutral float-right" title="lexicoR" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, lope.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>